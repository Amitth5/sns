<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">


<div class="container" style="margin-top: 50px;">

    <div class="container fluid pull-left">
        <form method ="GET" action="http://3.94.170.142/transaction">
            <label for="birthday">Select Date:</label>
            <input type="date" id="date" name="date" class="form-control">
            <input type="submit" class="btn btn-info">
        </form>
    </div>

<div class="form-group">
    <label for="exampleInputEmail1">Customer Name</label>
    <input type="text" class="form-control" id="customer_name"  placeholder="Customer Name">
</div>


<div class="form-group">
    <label for="exampleInputEmail1">Restaurant Name</label>
    <input type="text" class="form-control" id="resto_name"  placeholder="Restaurant Name">
</div>

<div class="form-group">
    <label for="exampleFormControlSelect1">Select Delivery Boy</label>
    <select class="form-control" id="delivery_boy">
      <option value="96">Amit</option>
      <option value="674">Krishna</option>
      <option value="1084">Rahul Parmar</option>
      <option value="885">Sameer</option>
      <option value="1697">Subhash</option>
      <option value="1551">Sunil</option>
      <option value="2733">Rohit Dhanke</option>
      <option value="97">Vinay Salve</option>

    </select>
</div>

<div class="form-group">
    <label for="exampleInputEmail1">Amount</label>
    <input type="text" class="form-control" id="amount"  placeholder="Amount">
</div>

<div class="form-group">
    <label for="exampleInputEmail1">Transaction Date</label>
    <input type="date" class="form-control" id="transaction_date"  placeholder="Date">
</div>

<div class="form-group">
    <label for="exampleFormControlSelect1">Status</label>
    <select class="form-control" id="status">
      <option value="1">Pending</option>
      <option value="2">Offline Order</option>
      <option value="3">Hotel Payment</option>
      <option value="4">Refund</option>
    </select>
</div>

<div class="form-group">
    <label for="exampleFormControlTextarea1">Description</label>
    <textarea class="form-control" id="description" rows="3"></textarea>
</div>

<button type="submit" id="submit" class="btn btn-primary mb-2">Submit Details</button>

</div>

<div class="container fluid" style="margin-top:20px; margin-left:10%">
    <h2>Total Sale: <%= data.totalOrderValue %> </h2>
    <h2>Total Deduction: <%=  data.deliveryDeduction  %></h2>




<table class="table">
  <thead>
    <tr>
      <th scope="col">Delivery Partner</th>
      <th scope="col">Restaurant Name</th>
      <th scope="col">Customer Name</th>
      <th scope="col">Amount</th>
      <th scope="col">Status</th>
    </tr>
  </thead>
  <tbody>
  
  <% transactionData.forEach(function(product) { %>
<tr>
  <td scope="row"> <%= product.delivery_id %> </td>
  <td> <%= product.restaurant_name %> </td>
  <td> <%= product.customer_name %> </td>
  <td> <%= product.amount %> </td>
   <td> <%= product.status %> </td>
</tr>
<% }); %>
  </tbody>
</table>
</div>
<script>
    $(document).ready(function(){
        $('#submit').click(function(){
            var customer_name = $('#customer_name').val();
            var resto_name = $('#resto_name').val();
            var delivery_boy = $('#delivery_boy').find(":selected").val()
            var status = $('#status').find(":selected").val();
            var description = $('#description').val();
            var transaction_date = $('#transaction_date').val();
            var amount = $('#amount').val().trim();
            
            var postData = {"customer_name": customer_name, "resto_name": resto_name, "delivery_boy": delivery_boy, "status": status, "amount": amount, "description": description, "transaction_date": transaction_date}
            $.get( "http://3.94.170.142/inserttransaction",{"data":postData}, function(res , statua) {
            alert('a');
            console.log(res);
            console.log(status);  
        
            });

        });
    });
</script>
